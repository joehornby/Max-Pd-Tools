#N canvas 498 222 1209 739 12;
#N canvas 918 660 607 300 ReynoldsNumber 0;
#X obj 31 70 r at.airflowSpeed;
#X obj 31 154 expr 1.2041*$f1*$f2/0.00001983;
#X obj 57 110 r at.triggerCalc;
#X obj 31 197 s at.ReynoldsNum;
#X obj 172 197 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 100190 256;
#X text 254 152 eqn(2) Density of dry air at 20deg = 1.2041 kgmâˆ’3
Dynamic viscosity of air = 1.983 x10^-5, f 46;
#X text 25 19 Calculate Reynolds Number (measure of turbulence);
#X obj 237 71 r at.diameter;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 1 0 4 0;
#X connect 2 0 1 0;
#X connect 7 0 1 1;
#X restore 537 261 pd ReynoldsNumber;
#N canvas 65 584 1119 568 StrouhalNumber 0;
#X obj 71 99 moses 47;
#X obj 71 42 r at.ReynoldsNum;
#X msg 152 144 0.2684 -1.0356;
#X msg 961 141 0.576 -175.956;
#X msg 849 141 0.1776 2.2023;
#X msg 747 142 0.204 0.3364;
#X msg 622 142 0.2257 -0.4402;
#X msg 502 143 0.2492 -0.8861;
#X msg 383 144 0.4291 -3.6735;
#X msg 265 144 0.2437 -0.8607;
#X obj 152 100 moses 180;
#X obj 266 99 moses 230;
#X obj 383 99 moses 240;
#X obj 502 97 moses 360;
#X obj 622 95 moses 1300;
#X obj 747 93 moses 5000;
#X obj 961 95 moses 1e+006;
#X obj 849 94 moses 200000;
#X obj 155 242 unpack f f, f 13;
#X obj 156 322 expr $f1 + $f2 / sqrt($f3);
#X obj 335 281 r at.ReynoldsNum;
#X obj 155 380 s at.StrouhalNum;
#X obj 29 282 r at.triggerCalc;
#X text 367 322 eqn (3);
#X text 211 19 Calculate Strouhal number (associated with lift force)
Split Reynolds Number into range shown in Table 2 of the Selfridge
paper. (Chained [moses] give split), f 79;
#X connect 0 1 10 0;
#X connect 1 0 0 0;
#X connect 2 0 18 0;
#X connect 3 0 18 0;
#X connect 4 0 18 0;
#X connect 5 0 18 0;
#X connect 6 0 18 0;
#X connect 7 0 18 0;
#X connect 8 0 18 0;
#X connect 9 0 18 0;
#X connect 10 0 2 0;
#X connect 10 1 11 0;
#X connect 11 0 9 0;
#X connect 11 1 12 0;
#X connect 12 0 8 0;
#X connect 12 1 13 0;
#X connect 13 0 7 0;
#X connect 13 1 14 0;
#X connect 14 0 6 0;
#X connect 14 1 15 0;
#X connect 15 0 5 0;
#X connect 15 1 17 0;
#X connect 16 0 3 0;
#X connect 17 0 4 0;
#X connect 17 1 16 0;
#X connect 18 0 19 0;
#X connect 18 1 19 1;
#X connect 19 0 21 0;
#X connect 20 0 19 2;
#X connect 22 0 19 0;
#X restore 537 294 pd StrouhalNumber;
#N canvas 0 552 1429 626 FundamentalFreq 0;
#X obj 511 71 r at.ReynoldsNum;
#X obj 11 64 r at.triggerCalc;
#X obj 47 93 r at.StrouhalNum;
#X obj 168 93 r at.airflowSpeed;
#X obj 296 93 r at.diameter;
#X obj 48 142 expr $f1 * $f2 / $f3, f 36;
#X text 310 143 eqn (1);
#X obj 49 303 expr 2 * $f1;
#X obj 69 180 s at.fundamentalFreq;
#X obj 49 217 t f f f f, f 46;
#X obj 155 304 expr 3 * $f1;
#X obj 261 304 expr 4 * $f1;
#X obj 368 304 expr 5 * $f1;
#X obj 49 339 pack f f f f, f 46;
#X obj 49 398 outlet;
#X text 105 397 Centre frequencies for filter;
#X text 45 36 Calculate fundamental and harmonics of Aeolian Tone;
#X obj 511 97 moses 193260, f 36;
#X text 452 152 eqn (7);
#X obj 512 150 expr 4.624 * 0.0001 * $f1 + 0.9797;
#X obj 762 150 expr 1.27 * 0.0001 * pow($f1 \, 2) - 8.552 * 1e-005
* $f1 + 16.5, f 66;
#X text 1233 149 eqn (8);
#X obj 512 183 / 100;
#X text 558 184 convert from percentage to decimal;
#X text 508 35 Calculate filter bandwidth and Q;
#X obj 512 212 expr 1/$f1;
#X obj 512 400 outlet;
#X text 568 400 Filter Q;
#X obj 844 117 r at.triggerCalc;
#X text 55 265 Drag dipole fundamental;
#X text 163 265 Lift dipole 1st harmonic;
#X text 265 263 Drag dipole 1st harmonic;
#X text 376 263 Lift dipole 2nd harmonic;
#X connect 0 0 17 0;
#X connect 1 0 5 0;
#X connect 2 0 5 0;
#X connect 3 0 5 1;
#X connect 4 0 5 2;
#X connect 5 0 8 0;
#X connect 5 0 9 0;
#X connect 7 0 13 0;
#X connect 9 0 7 0;
#X connect 9 1 10 0;
#X connect 9 2 11 0;
#X connect 9 3 12 0;
#X connect 10 0 13 1;
#X connect 11 0 13 2;
#X connect 12 0 13 3;
#X connect 13 0 14 0;
#X connect 17 0 19 0;
#X connect 17 1 20 0;
#X connect 19 0 22 0;
#X connect 22 0 25 0;
#X connect 25 0 26 0;
#X connect 28 0 20 0;
#X connect 28 0 19 0;
#X restore 537 327 pd FundamentalFreq;
#X f 11;
#X text 532 228 Calculations;
#X text 183 227 Inputs;
#X obj 185 281 nbx 5 14 0.1 60 0 0 empty empty empty 0 -8 0 10 -4032
-1 -1 33 256;
#X obj 185 353 nbx 5 14 1e-005 3 0 0 empty empty empty 0 -8 0 10 -4032
-1 -1 0.05 256;
#X obj 185 423 nbx 5 14 1e-005 20 0 0 empty empty empty 0 -8 0 10 -4032
-1 -1 9.6 256;
#X obj 187 494 nbx 5 14 0.5 25 0 0 empty empty empty 0 -8 0 10 -4032
-1 -1 1.8 256;
#X obj 187 577 nbx 5 14 0 359 0 0 empty empty empty 0 -8 0 10 -4032
-1 -1 5 256;
#X obj 190 664 nbx 5 14 0 359 0 0 empty empty empty 0 -8 0 10 -4032
-1 -1 35 256;
#X obj 185 371 s at.diameter;
#X obj 185 439 s at.length;
#X obj 187 510 s at.distance;
#X obj 187 595 s at.azimuth;
#X obj 190 681 s at.elevation;
#X text 183 263 Airflow speed(m/s);
#X text 183 333 Diameter of cylinder (m);
#X text 183 400 Length of cylinder (m);
#X text 183 474 Listener distance (m);
#X text 185 528 Azimuth angle between listener and source (deg);
#X text 186 629 Elevation angle between listener and source (deg);
#X obj 184 297 s at.airflowSpeed;
#X obj 794 252 r at.airflowSpeed;
#X obj 795 282 r at.diameter;
#X obj 794 313 r at.length;
#X obj 794 342 r at.distance;
#X obj 794 371 r at.azimuth;
#X obj 794 400 r at.elevation;
#X obj 795 434 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 795 467 s at.triggerCalc;
#X text 791 226 Update calcs when any parameter is changed;
#X obj 93 246 loadbang;
#X msg 139 280 28;
#N canvas 714 686 762 338 Gains 0;
#X text 12 15 Calculate gains of aeolian fundamental and harmonics
;
#N canvas 423 563 1392 510 liftDipoleAcousticIntensity 0;
#X obj 6 29 r at.triggerCalc;
#X obj 158 29 r at.ReynoldsNum;
#X obj 560 30 r at.airflowSpeed;
#X obj 903 30 r at.azimuth;
#X obj 729 29 r at.elevation;
#X obj 497 301 / 343;
#X obj 46 231 expr sqrt(2 * 3.141593) * 1 * pow($f1 \, 2) * $f2 *$f3
* 1.2041 * pow($f4 \, 6) * pow(sin($f5) \, 2) * pow(cos($f6) \, 2)
, f 123;
#X obj 46 200 r at.StrouhalNum;
#X obj 389 200 r at.length;
#X obj 158 68 expr pow(10 \, 1.536)*pow($f1 \, -0.245) * $f2;
#X obj 449 29 r at.diameter;
#X obj 45 371 /;
#X obj 95 305 r at.distance;
#X obj 45 464 *;
#X text 923 230 Numerator of lift intensity eqn;
#X text 927 327 Denominator of lift intensity eqn;
#X obj 175 427 expr exp(-0.5 * pow(( 2 * 3.14159 * $f1 * $f2 * $f3
/ $f4) \, 2)) * pow(sin($f5) \, 2) * pow(sin($f6) \, 2), f 108;
#X obj 95 329 expr 32 * pow(343. \, 3) * pow($f1 \, 2)*pow((1 - $f2
* cos($f3)) \, 4), f 116;
#X obj 325 397 r at.StrouhalNum;
#X obj 45 500 outlet;
#X obj 471 139 t f;
#X obj 618 139 t f;
#X text 946 427 Exponential component of lift intensity eqn;
#X connect 0 0 6 0;
#X connect 0 0 9 0;
#X connect 1 0 9 0;
#X connect 2 0 5 0;
#X connect 2 0 6 3;
#X connect 3 0 6 5;
#X connect 3 0 16 5;
#X connect 4 0 6 4;
#X connect 4 0 17 2;
#X connect 4 0 16 4;
#X connect 5 0 16 0;
#X connect 5 0 17 1;
#X connect 6 0 11 0;
#X connect 7 0 6 0;
#X connect 8 0 6 2;
#X connect 9 0 6 1;
#X connect 9 0 20 0;
#X connect 10 0 9 1;
#X connect 10 0 21 0;
#X connect 11 0 13 0;
#X connect 12 0 17 0;
#X connect 13 0 19 0;
#X connect 16 0 13 1;
#X connect 17 0 11 1;
#X connect 18 0 16 1;
#X connect 20 0 16 2;
#X connect 21 0 16 3;
#X restore 17 76 pd liftDipoleAcousticIntensity;
#X obj 17 216 pack f f f f f, f 67;
#N canvas 511 348 1119 510 dragDipoleAcousticIntensity 0;
#X obj 35 33 r at.triggerCalc;
#X obj 198 33 r at.ReynoldsNum;
#X obj 503 29 r at.diameter;
#X obj 524 144 r at.airflowSpeed;
#X obj 851 144 r at.azimuth;
#X obj 687 144 r at.elevation;
#X obj 198 77 expr pow(10 \, 1.536) * pow($f1 \, -0.245) * $f2;
#X text 519 76 Correlation length of cylinder;
#X obj 35 204 expr sqrt(2 * 3.141593) * $f1 * $f2 * $f3 * 1.2041 *
pow($f4 \, 6) *pow( sin($f5 + 3.141593/2) \, 2) * pow(cos($f6) \, 2)
, f 117;
#X obj 53 141 r at.StrouhalNum;
#X obj 361 143 r at.length;
#X text 866 203 Numerator of frag intensity eqn;
#X obj 35 323 /;
#X obj 170 279 expr 32 * pow(343. \, 3) * pow($f1 \, 2);
#X obj 170 250 r at.distance;
#X obj 49 250 r at.triggerCalc;
#X text 435 280 Denominator of drag intensity equation;
#X obj 35 371 * 0.1;
#X obj 35 416 outlet;
#X text 95 417 Drag dipole acoustic intensity;
#X connect 0 0 8 0;
#X connect 1 0 6 0;
#X connect 2 0 6 1;
#X connect 3 0 8 3;
#X connect 4 0 8 5;
#X connect 5 0 8 4;
#X connect 6 0 8 1;
#X connect 8 0 12 0;
#X connect 9 0 8 0;
#X connect 10 0 8 2;
#X connect 12 0 17 0;
#X connect 13 0 12 1;
#X connect 14 0 13 0;
#X connect 15 0 13 0;
#X connect 17 0 18 0;
#X restore 264 76 pd dragDipoleAcousticIntensity;
#N canvas 497 493 1372 431 wakeAcousticIntensity 0;
#X obj 217 55 r at.ReynoldsNum;
#X obj 598 171 r at.airflowSpeed;
#X obj 27 169 r at.StrouhalNum;
#X obj 407 170 r at.length;
#X obj 522 56 r at.diameter;
#X obj 217 90 expr pow(10 \, 1.536) * pow($f1 \, -0.245) * $f2;
#X obj 27 233 expr sqrt(2* 3.141593) *1 * pow($f1 \, 2) * $f2 * $f3
* 1.2041 * pow($f4 \, 8), f 82;
#X text 538 90 correlation length of cylinder (diameters);
#X obj 7 55 r at.triggerCalc;
#X obj 215 330 expr 16 * pow(3.141593 \, 2) * pow(343. \, 5) * pow((1
- $f1 * cos(180 - $f2)) \, 5) * pow($f3 \, 2), f 95;
#X obj 215 291 / 343;
#X obj 546 288 r at.elevation;
#X obj 877 289 r at.distance;
#X obj 27 377 /;
#X obj 27 404 outlet;
#X text 82 404 wake intensity;
#X text 612 233 wake gain numerator;
#X text 894 330 wake gain denominator;
#X connect 0 0 5 0;
#X connect 1 0 6 3;
#X connect 1 0 10 0;
#X connect 2 0 6 0;
#X connect 3 0 6 2;
#X connect 4 0 5 1;
#X connect 5 0 6 1;
#X connect 6 0 13 0;
#X connect 8 0 5 0;
#X connect 8 0 6 0;
#X connect 9 0 13 1;
#X connect 10 0 9 0;
#X connect 11 0 9 1;
#X connect 12 0 9 2;
#X connect 13 0 14 0;
#X restore 529 77 pd wakeAcousticIntensity;
#X obj 529 277 outlet;
#X obj 17 280 outlet;
#X obj 250 185 * 0.6;
#X obj 366 186 * 0.125;
#X obj 483 185 * 0.1;
#X obj 17 100 t f f f, f 67;
#X obj 264 139 t b f f, f 15;
#X connect 1 0 10 0;
#X connect 2 0 6 0;
#X connect 3 0 11 0;
#X connect 4 0 5 0;
#X connect 7 0 2 2;
#X connect 8 0 2 3;
#X connect 9 0 2 4;
#X connect 10 0 2 0;
#X connect 10 1 7 0;
#X connect 10 2 9 0;
#X connect 11 0 2 0;
#X connect 11 1 2 1;
#X connect 11 2 8 0;
#X restore 638 376 pd Gains;
#N canvas 801 78 1027 951 TonesAndFilters 0;
#X text 33 35 Tone generation (noise and filters) Filters: 1 Lift Dipole
Fundamental Frequency 2 Drag Dipole Fundamental Frequency 3 Lift Dipole
1st Harmonic 4 Drag Dipole 1st Harmonic 5 Lift Dipole 2nd Harmonic
;
#X obj 41 243 inlet;
#X obj 160 243 inlet;
#X obj 280 242 inlet;
#X obj 39 451 bp~, f 18;
#X obj 97 285 unpack f f f f f, f 79;
#X obj 176 451 bp~, f 18;
#X obj 311 451 bp~, f 18;
#X obj 446 450 bp~, f 18;
#X obj 581 450 bp~, f 18;
#X obj 8 396 noise~;
#X text 278 214 Gains;
#X text 155 216 Filter Q;
#X text 37 217 Centre freqs;
#X obj 39 491 bp~, f 18;
#X obj 176 491 bp~, f 18;
#X obj 311 491 bp~, f 18;
#X obj 446 490 bp~, f 18;
#X obj 581 490 bp~, f 18;
#X text 729 481 2 identical filters in series to improve filter shape
, f 29;
#X obj 11 789 lop~;
#X obj 71 766 r at.fundamentalFreq;
#X obj 11 827 hip~;
#X obj 11 860 hip~;
#X text 57 856 2nd order filter to improve shape;
#X obj 57 590 unpack f f f f f, f 78;
#X obj 39 625 *~;
#X obj 175 622 *~;
#X obj 310 622 *~;
#X obj 446 621 *~;
#X obj 582 619 *~;
#X text 255 774 comment;
#X text 433 210 Wake gain components;
#X obj 436 240 inlet;
#X obj 10 898 *~;
#X obj 39 667 throw~ at.mix1;
#X obj 176 666 throw~ at.mix1;
#X obj 311 666 throw~ at.mix1;
#X obj 446 666 throw~ at.mix1;
#X obj 582 665 throw~ at.mix1;
#X obj 11 1001 catch~ at.mix1;
#X obj 10 933 throw~ at.mix1;
#X text 128 1001 Combined tones;
#X obj 12 1052 outlet~;
#X text 18 729 Wake component;
#X obj 160 347 t f f f f f, f 78;
#X obj 12 1028 *~ 1000;
#X text 129 1026 Adjust level to be audible;
#X connect 1 0 5 0;
#X connect 2 0 45 0;
#X connect 3 0 25 0;
#X connect 4 0 14 0;
#X connect 5 0 4 1;
#X connect 5 0 14 1;
#X connect 5 1 6 1;
#X connect 5 1 15 1;
#X connect 5 2 7 1;
#X connect 5 2 16 1;
#X connect 5 3 8 1;
#X connect 5 3 17 1;
#X connect 5 4 9 1;
#X connect 5 4 18 1;
#X connect 6 0 15 0;
#X connect 7 0 16 0;
#X connect 8 0 17 0;
#X connect 9 0 18 0;
#X connect 10 0 4 0;
#X connect 10 0 6 0;
#X connect 10 0 7 0;
#X connect 10 0 8 0;
#X connect 10 0 9 0;
#X connect 10 0 20 0;
#X connect 14 0 26 0;
#X connect 15 0 27 0;
#X connect 16 0 28 0;
#X connect 17 0 29 0;
#X connect 18 0 30 0;
#X connect 20 0 22 0;
#X connect 21 0 20 1;
#X connect 21 0 23 1;
#X connect 21 0 22 1;
#X connect 22 0 23 0;
#X connect 23 0 34 0;
#X connect 25 0 26 1;
#X connect 25 1 27 1;
#X connect 25 2 28 1;
#X connect 25 3 29 1;
#X connect 25 4 30 1;
#X connect 26 0 35 0;
#X connect 27 0 36 0;
#X connect 28 0 37 0;
#X connect 29 0 38 0;
#X connect 30 0 39 0;
#X connect 33 0 34 1;
#X connect 34 0 41 0;
#X connect 40 0 46 0;
#X connect 45 0 4 2;
#X connect 45 0 14 2;
#X connect 45 1 6 2;
#X connect 45 1 15 2;
#X connect 45 2 7 2;
#X connect 45 2 16 2;
#X connect 45 3 8 2;
#X connect 45 3 17 2;
#X connect 45 4 9 2;
#X connect 45 4 18 2;
#X connect 46 0 43 0;
#X restore 538 414 pd TonesAndFilters;
#X f 23;
#X msg 140 352 0.033;
#X msg 143 421 9.6;
#X msg 147 490 1.8;
#X msg 148 574 5;
#X msg 149 661 35;
#N canvas 49 314 450 300 QuickLimiter 0;
#X obj 62 191 *~;
#X obj 92 69 env~;
#X obj 92 91 dbtorms;
#X obj 92 135 -;
#X obj 92 157 lop~ 20;
#X obj 220 79 vsl 15 128 0 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 12700 1;
#X msg 92 113 1 \$1;
#X obj 62 29 inlet~;
#X obj 62 231 outlet~;
#X connect 0 0 8 0;
#X connect 1 0 2 0;
#X connect 2 0 6 0;
#X connect 3 0 4 0;
#X connect 3 0 5 0;
#X connect 4 0 0 1;
#X connect 6 0 3 0;
#X connect 7 0 0 0;
#X connect 7 0 1 0;
#X restore 538 608 pd QuickLimiter;
#X text 553 480 Output;
#X obj 538 633 dac~;
#X obj 538 583 dB~;
#X obj 557 567 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -4034 -1 -1 -100 256;
#X obj 557 519 loadbang;
#X msg 557 543 -100;
#X obj 637 445 vsl 15 128 -100 6 0 0 empty empty empty 0 -9 0 10 -4034
-1 -1 0 1;
#X text 654 467 - -20dB;
#X text 654 442 - 0dB;
#X text 186 26 Aeolian Tone;
#X text 185 64 Physically derived synthesis model of Aeolian tones
(a whistle-like sound generated when air flows over cylinder or similar
object). Based on work by Rod Selfridge et al: https://www.eecs.qmul.ac.uk/~josh/documents/2016/Selfridge%20Reiss%20AES141%202016.pdf
, f 69;
#X text 585 22 at.v0.2;
#X text 584 39 Joe Hornby;
#X obj 653 609 vu 15 120 empty empty -1 -8 0 10 -66577 -1 1 0;
#X obj 619 584 env~;
#X obj 652 584 - 100;
#X connect 2 0 35 0;
#X connect 2 1 35 1;
#X connect 5 0 22 0;
#X connect 6 0 11 0;
#X connect 7 0 12 0;
#X connect 8 0 13 0;
#X connect 9 0 14 0;
#X connect 10 0 15 0;
#X connect 23 0 29 0;
#X connect 24 0 29 0;
#X connect 25 0 29 0;
#X connect 26 0 29 0;
#X connect 27 0 29 0;
#X connect 28 0 29 0;
#X connect 29 0 30 0;
#X connect 32 0 33 0;
#X connect 32 0 36 0;
#X connect 32 0 37 0;
#X connect 32 0 38 0;
#X connect 32 0 39 0;
#X connect 32 0 40 0;
#X connect 33 0 5 0;
#X connect 34 0 35 2;
#X connect 34 1 35 3;
#X connect 35 0 44 0;
#X connect 36 0 6 0;
#X connect 37 0 7 0;
#X connect 38 0 8 0;
#X connect 39 0 9 0;
#X connect 40 0 10 0;
#X connect 41 0 43 0;
#X connect 41 0 43 1;
#X connect 44 0 56 0;
#X connect 44 0 41 0;
#X connect 45 0 44 1;
#X connect 46 0 47 0;
#X connect 47 0 45 0;
#X connect 47 0 48 0;
#X connect 48 0 45 0;
#X connect 56 0 57 0;
#X connect 57 0 55 0;
